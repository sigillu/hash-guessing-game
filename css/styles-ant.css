/* Basic Styling */
    html {
        scroll-behavior: smooth; /* Optional: adds smooth scrolling */
    }
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background-color: #ffffff;
      color: #333;
      transition: background-color 0.3s, color 0.3s; /* Smooth transition for dark mode */
    }
    .section {
      margin-bottom: 2rem;
      padding: 1rem;
      background: #f9f9f9;
      border-radius: 8px;
      border: 1px solid #ddd;
      transition: background-color 0.3s, border-color 0.3s; /* Smooth transition */
    }
    code {
      background: #f0f0f0;
      padding: 4px 6px;
      border-radius: 4px;
      display: block;
      margin: 0.5rem 0;
      font-family: monospace;
      color: #333;
      word-break: break-word; /* Ensure long hashes wrap */
      transition: background-color 0.3s, color 0.3s; /* Smooth transition */
    }
    .hidden { display: none; }
    button, .button-link { /* Style links like buttons */
      display: inline-block; /* Allow margin/padding */
      background-color: #007bff;
      border: none;
      color: #fff !important; /* Ensure text is white, override link color */
      padding: 0.5rem 1rem;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 1rem;
      margin-right: 0.5rem;
      text-decoration: none; /* Remove underline from links styled as buttons */
      text-align: center;
      font-family: Arial, sans-serif; /* Match button font */
      font-size: inherit; /* Match button font size */
      transition: background-color 0.2s, transform 0.1s; /* Button transitions */
    }
    /* Specific style for secondary/back/skip buttons */
    button.secondary {
        background-color: #6c757d; /* Grey color */
    }
    button.secondary:hover {
        background-color: #5a6268;
    }
     /* Specific style for donation button (Kept for potential future use, but button removed) */
    .button-link.donate {
        background-color: #ffdd00; /* Yellow color like coffee */
        color: #333 !important; /* Dark text */
        border: 1px solid #e0c200;
    }
    .button-link.donate:hover {
        background-color: #e0c200;
        color: #333 !important;
        transform: translateY(-1px);
    }


    button:hover, .button-link:hover:not(.donate) { /* Exclude donate button from dark hover */
      background-color: #0056b3;
      transform: translateY(-1px); /* Slight lift on hover */
      color: #fff !important; /* Keep text white on hover */
    }
    button:active, .button-link:active {
      transform: translateY(0px); /* Press effect */
    }
    input[type="text"], select {
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      margin-right: 0.5rem;
      min-width: 140px;
      width: auto;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s; /* Smooth transition */
    }
    /* Quiz Specific */
    .quiz-option {
      background-color: #f0f0f0;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin: 0.25rem 0;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s; /* Smooth transition */
    }
    .quiz-option:hover {
      background-color: #007bff;
      color: #fff;
    }
    ol li {
      margin-bottom: 1rem;
      line-height: 1.6; /* Better readability for list items */
    }
    /* Progress Bar Styles */
    .progress-bar-container {
        margin-top: 0.75rem; /* Space between bars/labels */
        height: 20px;
        background-color: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        width: 100%; /* Ensure full width */
    }
    .progress-bar {
        height: 100%;
        width: 0%;
        text-align: center;
        color: white;
        line-height: 20px; /* Vertically center text */
        font-size: 0.8rem;
        transition: width 0.5s ease; /* Smooth transition */
        white-space: nowrap; /* Prevent text wrapping */
    }
    #quizProgress { background-color: #4caf50; } /* Green for completion */
    #quizScoreBar { background-color: #007bff; } /* Blue for score */
    .progress-label {
        font-size: 0.85rem;
        font-weight: bold;
        margin-top: 1rem; /* Space above first label */
        margin-bottom: 0.25rem; /* Space below label */
        display: block; /* Ensure it takes full width */
        color: #555;
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 1s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .clue-hints {
      margin-top: 1rem;
      line-height: 1.6;
    }
    .hint-highlight {
      background-color: #ffffcc;
      padding: 0.25rem 0.5rem;
      border-left: 4px solid #ffcc00;
      margin-top: 0.5rem;
      display: block;
      animation: fadeInHint 0.6s ease-in-out;
    }
    @keyframes fadeInHint {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .quiz-feedback {
      padding: 0.75rem;
      margin-top: 1rem;
      border-radius: 6px;
      font-weight: bold;
      animation: fadeInFeedback 0.6s ease-in-out;
    }
    .quiz-feedback.correct {
      background-color: #e6ffed;
      color: #207544;
      border: 1px solid #b5e2c5;
    }
    .quiz-feedback.incorrect {
      background-color: #ffeaea;
      color: #b22222; /* Default color for incorrect feedback text */
      border: 1px solid #e2b5b5;
    }
    /* Ensure target hash label is default color even in incorrect feedback */
    .quiz-feedback.incorrect .target-hash-label {
      color: #333; /* Default text color for light mode */
    }
    /* Style for the reminder text */
    .reminder-text {
        font-size: 0.9em;
        font-style: italic;
        color: #666;
        margin-top: 0.25rem; /* Small space below hash */
        margin-bottom: 1rem; /* Space before clue */
    }
    /* Bonus Game Specific Styles */
    #bonusGame .country-guess-option {
        display: inline-block;
        margin: 0.5rem 0.25rem;
        background-color: #007bff; /* Default blue */
        border: none;
        color: #fff !important;
        transition: background-color 0.2s, transform 0.1s; /* Add transitions */
    }
    #bonusGame .country-guess-option:hover:not(:disabled) { /* Only apply hover if not disabled */
        background-color: #0056b3;
        transform: translateY(-1px);
    }
    /* Style for correctly guessed country */
    #bonusGame .country-guess-option.correct-guess {
        background-color: #28a745 !important; /* Green - Use !important for higher specificity */
        cursor: default;
    }
    /* Style for incorrectly guessed country */
    #bonusGame .country-guess-option.incorrect-guess {
        background-color: #dc3545 !important; /* Red - Use !important for higher specificity */
        cursor: default; /* Optional: change cursor for incorrect too */
    }
    /* Style for disabled buttons (after correct guess) */
    #bonusGame .country-guess-option:disabled {
        background-color: #adb5bd; /* Lighter grey when disabled */
        cursor: not-allowed;
        transform: none; /* Remove hover effect */
    }
    /* Ensure correct guess stays green even when disabled */
    #bonusGame .country-guess-option.correct-guess:disabled {
        background-color: #28a745 !important; /* Keep Green */
    }

    #bonusGame code { /* Ensure code blocks in bonus game look right */
        margin-top: 0.25rem;
        margin-bottom: 1rem;
    }
    #bonusHashDisplay {
        min-height: 3em; /* Prevent layout shift when hash appears */
        padding-top: 0.5rem;
    }
    /* Exit Screen Score Animation */
    .score-highlight {
        animation: pulseScore 1.5s infinite ease-in-out;
    }
    @keyframes pulseScore {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.03); opacity: 0.9; }
    }
    body.dark-mode .score-highlight p { /* Ensure text is readable in dark mode during pulse */
        color: #f0f0f0 !important;
    }

    /* Dark Mode Toggle Button Styling */
    #darkModeToggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1002;
        padding: 0.3rem 0.6rem;
        font-size: 1.2rem;
        background: none;
        border: 1px solid #ccc;
        border-radius: 50%;
        line-height: 1;
        cursor: pointer;
        width: auto; /* Override potential general button width */
        box-sizing: content-box; /* Ensure padding doesn't affect size */
        margin: 0; /* Override potential general button margin */
        color: #333; /* Ensure icon is visible in light mode */
    }
    #darkModeToggle:hover {
        background-color: rgba(0,0,0,0.05); /* Subtle hover */
    }

    /* Visually Hidden Class for Labels */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
    }


    @keyframes fadeInFeedback {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    /* Responsive Design */
    @media (max-width: 600px) {
      body {
        margin: 1rem;
        font-size: 16px;
      }
      h1, h2, h3 {
        font-size: 1.2em;
      }
      .section {
        padding: 1rem 0.75rem;
      }
      /* Apply width: 100% only to buttons *not* the dark mode toggle */
      button:not(#darkModeToggle), .button-link, input[type="text"], select {
        width: 100%;
        box-sizing: border-box; /* Include padding and border in width */
        margin: 0.5rem 0;
        font-size: 1rem;
      }
       /* Ensure dark mode toggle keeps its size */
      #darkModeToggle {
          width: auto;
          box-sizing: content-box;
          margin: 0; /* Keep margin 0 */
          /* Adjust position slightly if needed for mobile */
          top: 0.5rem;
          right: 0.5rem;
      }

      .quiz-option {
        font-size: 1rem;
        padding: 0.75rem;
      }
      code {
        font-size: 0.85rem; /* Slightly smaller code font on mobile */
      }
      /* Adjust button/link margin for stacking */
      button:not(#darkModeToggle), .button-link {
        margin-right: 0;
      }
      .progress-bar {
          font-size: 0.7rem; /* Slightly smaller font on mobile */
      }
      #bonusGame .country-guess-option { /* Stack bonus game options */
          display: block;
          width: 100%;
          margin: 0.5rem 0;
          box-sizing: border-box;
      }
    }
    /* Dark Mode */
    body.dark-mode {
      background-color: #121212;
      color: #f0f0f0;
    }
    body.dark-mode .section {
      background-color: #1e1e1e;
      border-color: #333;
    }
    body.dark-mode code {
      background-color: #2c2c2c;
      color: #e0e0e0;
    }
    body.dark-mode .quiz-option {
      background-color: #2a2a2a;
      border-color: #555;
      color: #f0f0f0;
    }
    body.dark-mode .quiz-option:hover {
      background-color: #444;
      color: #fff;
    }
    body.dark-mode button, body.dark-mode .button-link {
      background-color: #444;
      color: #fff !important;
    }
     body.dark-mode button:hover, body.dark-mode .button-link:hover:not(.donate) { /* Exclude donate button from dark hover */
      background-color: #555;
      color: #fff !important;
    }
     /* Dark mode secondary button */
     body.dark-mode button.secondary {
        background-color: #5a6268;
     }
     body.dark-mode button.secondary:hover {
        background-color: #495057;
     }
      /* Dark mode donate button */
     body.dark-mode .button-link.donate {
        background-color: #ffdd00; /* Keep yellow */
        color: #333 !important; /* Keep dark text */
        border-color: #e0c200;
     }
     body.dark-mode .button-link.donate:hover {
        background-color: #e0c200;
        color: #333 !important;
     }

    body.dark-mode input[type="text"],
    body.dark-mode select {
      background-color: #2c2c2c;
      color: #f0f0f0;
      border-color: #555;
    }
    body.dark-mode .hint-highlight {
      background-color: #444444;
      color: #ffff66;
      border-left: 4px solid #ffcc00;
    }
    body.dark-mode .quiz-feedback.correct {
      background-color: #1a3a24;
      color: #a6e2b8;
      border-color: #3d6e4f;
    }
    body.dark-mode .quiz-feedback.incorrect {
      background-color: #4d1f1f;
      color: #f5b5b5; /* Default dark mode incorrect text color */
      border-color: #8c4d4d;
    }
    /* Refined dark mode rule for target hash label */
    body.dark-mode .quiz-feedback.incorrect .target-hash-label {
        color: #f0f0f0 !important; /* Default text color for dark mode, !important for specificity */
    }
    /* Specific override for target hash value mark in dark mode */
    body.dark-mode .target-hash-value {
        background-color: #2c2c2c !important; /* Match code background */
        color: #e0e0e0 !important; /* Match code text color */
    }
    /* Dark mode progress bars */
    body.dark-mode .progress-bar-container {
        background-color: #444;
    }
    body.dark-mode #quizProgress {
        background-color: #367c39; /* Keep green */
    }
    body.dark-mode #quizScoreBar {
        background-color: #0d6efd; /* Keep blue */
    }
     body.dark-mode .progress-label {
        color: #aaa; /* Lighter label color */
    }
     /* Dark mode reminder text */
     body.dark-mode .reminder-text {
        color: #aaa;
     }
     /* Dark mode bonus game options */
     body.dark-mode #bonusGame .country-guess-option {
         background-color: #444; /* Match primary dark button */
         border: none;
         color: #fff !important;
     }
     body.dark-mode #bonusGame .country-guess-option:hover:not(:disabled) {
         background-color: #555; /* Match primary dark hover */
     }
     /* Dark mode bonus game feedback colors */
     body.dark-mode #bonusGame .country-guess-option.correct-guess {
        background-color: #198754 !important; /* Darker green */
     }
     body.dark-mode #bonusGame .country-guess-option.incorrect-guess {
        background-color: #b02a37 !important; /* Darker red */
     }
      body.dark-mode #bonusGame .country-guess-option:disabled {
        background-color: #495057; /* Darker grey when disabled */
    }
     /* Dark mode bonus game disabled correct */
     body.dark-mode #bonusGame .country-guess-option.correct-guess:disabled {
        background-color: #198754 !important; /* Keep Dark Green */
     }

     /* Dark mode toggle button */
     body.dark-mode #darkModeToggle {
        border-color: #555;
        color: #f0f0f0;
     }
      body.dark-mode #darkModeToggle:hover {
        background-color: rgba(255,255,255,0.1); /* Subtle hover */
    }


     body.dark-mode .modal-content {
        background-color: #1e1e1e;
        border-color: #333;
    }
    body.dark-mode .close {
        color: #aaa;
    }
    body.dark-mode .close:hover,
    body.dark-mode .close:focus {
        color: #fff;
    }
    body.dark-mode .toast {
        background-color: #333;
        color: #fff;
    }
    body.dark-mode .toast.info {
        background-color: #0e5460; /* Darker info blue for contrast */
    }


    /* Hashing Tool Specific Styles */
    input[type="text"].hash-input { /* Specific class for hash tool input */
      padding: 0.5rem;
      width: 100%;
      max-width: 500px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 1rem;
      font-size: 1rem;
      box-sizing: border-box;
    }
    .copy-btn {
      display: inline-block; /* Changed from block */
      margin-left: 0.5rem; /* Add space next to code */
      margin-top: 0; /* Align vertically */
      background: #666;
      color: white;
      border: none;
      padding: 0.25rem 0.5rem;
      font-size: 0.8rem;
      cursor: pointer;
      border-radius: 4px;
      vertical-align: middle; /* Align with code block */
    }
    body.dark-mode .copy-btn {
        background-color: #555;
    }
    body.dark-mode .copy-btn:hover {
        background-color: #666;
    }
    .toast {
      position: fixed;
      bottom: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      background-color: #28a745; /* Default success color */
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 3000;
      font-size: 0.9rem;
      animation: fadeInOut 2.5s ease-in-out forwards; /* Extended duration slightly */
      opacity: 0; /* Start hidden */
    }
    .toast.info { /* Style for non-success messages */
        background-color: #17a2b8; /* Info blue */
    }
    @keyframes fadeInOut {
      0% { opacity: 0; transform: translate(-50%, 20px); }
      10% { opacity: 1; transform: translate(-50%, 0); }
      90% { opacity: 1; transform: translate(-50%, 0); }
      100% { opacity: 0; transform: translate(-50%, 20px); }
    }
    .hash-title {
      animation: popIn 1s ease-out;
    }
    @keyframes popIn {
      0% { transform: scale(0.8); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1001;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
      background-color: #fff;
      margin: 5% auto;
      padding: 1rem;
      border: 1px solid #888;
      width: 90%;
      max-width: 600px;
      border-radius: 8px;
      animation: slideDown 0.4s ease;
      position: relative; /* Needed for close button positioning */
      transition: background-color 0.3s, border-color 0.3s; /* Smooth transition */
    }
    .close {
      color: #aaa;
      position: absolute; /* Position relative to modal-content */
      top: 10px;
      right: 15px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      line-height: 1; /* Ensure it doesn't affect layout height */
    }
    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
    }
    .modal-trigger {
      display: inline-block; /* Changed from block to inline-block */
      margin: 1rem 0.5rem 0 0; /* Adjusted margin */
      padding: 0.5rem 1.2rem;
      font-size: 1rem;
      background: linear-gradient(135deg, #007bff, #0056b3);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      color: #fff !important; /* Ensure text is white */
      text-decoration: none; /* Remove underline */
      border-radius: 4px; /* Match other buttons */
    }
    .modal-trigger:hover {
      transform: scale(1.05) translateY(-1px); /* Added lift */
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
     body.dark-mode .modal-trigger {
        background: linear-gradient(135deg, #444, #555);
    }
    @keyframes slideDown {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    /* Exit Screen Specific Styles */
    #exitScreen {
        text-align: center; /* Center content */
    }
    #exitScreen p {
        margin-bottom: 1.5rem; /* Add space below paragraphs */
    }
